<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập Admin - BluePhone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
        body{background:linear-gradient(135deg,#1a73e8,#0d47a1);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
        .login-container{background:#fff;padding:40px;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.3);width:100%;max-width:400px}
        .logo{text-align:center;margin-bottom:30px;font-size:28px;font-weight:bold;color:#1a73e8}
        .logo span{color:#34a853}
        h2{text-align:center;margin-bottom:25px;color:#333;font-size:24px}
        .input-group{position:relative;margin-bottom:20px}
        .input-group i{position:absolute;left:15px;top:50%;transform:translateY(-50%);color:#999}
        .input-group input{width:100%;padding:12px 15px 12px 45px;border:1px solid #ddd;border-radius:8px;font-size:15px;outline:none;transition:.3s}
        .input-group input:focus{border-color:#1a73e8;box-shadow:0 0 0 3px rgba(26,115,232,.1)}
        button{width:100%;padding:12px;background:#1a73e8;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:.3s}
        button:hover{background:#0d47a1;transform:translateY(-1px)}
        .error{color:#d32f2f;font-size:14px;text-align:center;margin-top:10px;padding:10px;background:#ffebee;border-radius:4px;display:none}
        .admin-note{font-size:12px;color:#666;text-align:center;margin-top:20px;border-top:1px solid #eee;padding-top:15px}
        .admin-note a{color:#1a73e8;text-decoration:none;font-weight:500}
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">Blue<span>Phone</span> Admin</div>
        <h2>Đăng nhập Quản trị</h2>
        <form id="adminLoginForm">
            <div class="input-group">
                <i class="fas fa-user-shield"></i>
                <input type="text" id="username" placeholder="Tên đăng nhập" required autocomplete="username">
            </div>
            <div class="input-group">
                <i class="fas fa-lock"></i>
                <input type="password" id="password" placeholder="Mật khẩu" required autocomplete="current-password">
            </div>
            <button type="submit">Đăng nhập</button>
        </form>
        <p class="error" id="errorMsg"></p>
        <p class="admin-note">
        </p>
    </div>

    <script>
        // === KHỞI TẠO ADMIN VỚI MẬT KHẨU admin123 ===
        if (!localStorage.getItem('adminUsers')) {
            localStorage.setItem('adminUsers', JSON.stringify([
                { id: 1, username: 'admin', password: 'admin123', role: 'admin', createdAt: new Date().toISOString() }
            ]));
        }

        // === TỰ ĐỘNG ĐIỀN admin + admin123 KHI MỞ TRANG ===
        window.onload = () => {
            const username = document.getElementById('username');
            const password = document.getElementById('password');

            // Tự động điền
            username.value = 'admin';
            password.value = 'admin123';

            // Focus vào mật khẩu + chọn hết
            password.focus();
            password.select();

            // Tự động submit khi nhấn Enter
            document.getElementById('adminLoginForm').addEventListener('keypress', e => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    login();
                }
            });
        };

        // === HÀM ĐĂNG NHẬP ===
        function login() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const error = document.getElementById('errorMsg');

            const admins = JSON.parse(localStorage.getItem('adminUsers') || '[]');
            const user = admins.find(u => u.username === username && u.password === password);

            if (user) {
                localStorage.setItem('adminLoggedIn', 'true');
                localStorage.setItem('currentAdmin', JSON.stringify(user));
                window.location.href = 'dashboard.html';
            } else {
                error.textContent = 'Sai tên đăng nhập hoặc mật khẩu!';
                error.style.display = 'block';
            }
        }

        // === NÚT TỰ ĐỘNG ĐIỀN (DỰ PHÒNG) ===
        window.fillDemo = () => {
            document.getElementById('username').value = 'admin';
            document.getElementById('password').value = 'admin123';
            document.getElementById('password').focus();
        };

        // === XỬ LÝ FORM ===
        document.getElementById('adminLoginForm').addEventListener('submit', e => {
            e.preventDefault();
            login();
        });
    </script>
</body>
</html>